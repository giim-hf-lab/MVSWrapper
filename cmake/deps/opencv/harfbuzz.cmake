set(HB_HAVE_FREETYPE ON)

if (WIN32)
	set(HB_HAVE_UNISCRIBE ON)
	set(HB_HAVE_GDI ON)
	set(HB_HAVE_DIRECTWRITE ON)
endif ()

FetchContent_Declare(harfbuzz
	GIT_REPOSITORY "$CACHE{__C_GITHUB_PREFIX}harfbuzz/harfbuzz.git"
	GIT_TAG "${HARFBUZZ_VERSION}"
	GIT_SUBMODULES_RECURSE TRUE
	GIT_SHALLOW "${__G_FETCHCONTENT_GIT_SHALLOW}"
	GIT_REMOTE_UPDATE_STRATEGY CHECKOUT
	OVERRIDE_FIND_PACKAGE
)

find_package(harfbuzz REQUIRED GLOBAL)

set_property(
	TARGET
		harfbuzz
	PROPERTY SYSTEM TRUE
)

set(HARFBUZZ_FOUND TRUE)
get_property(HARFBUZZ_INCLUDE_DIRS
	TARGET harfbuzz
	PROPERTY INTERFACE_INCLUDE_DIRECTORIES
)
set(HARFBUZZ_LIBRARIES "${CMAKE_ARCHIVE_OUTPUT_DIRECTORY}/harfbuzz.lib")
if (WIN32)
	list(APPEND HARFBUZZ_LIBRARIES
		"gdi32"
		"usp10"
		"rpcrt4"
	)
endif ()
