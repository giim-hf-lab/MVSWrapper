FetchContent_GetProperties(opencv_contrib BINARY_DIR OPENCV_EXTRA_MODULES_PATH)

set(__L_OPTIONS
	"-D" "Protobuf_USE_STATIC_LIBS:BOOL=TRUE"
	"-D" "ZLIB_USE_STATIC_LIBS:BOOL=TRUE"
	"-D" "OPENCV_ENABLE_NONFREE:BOOL=TRUE"
	"-D" "OPENCV_EXTRA_MODULES_PATH:PATH=${OPENCV_EXTRA_MODULES_PATH}"
	"-D" "OPENCV_FORCE_3RDPARTY_BUILD:BOOL=TRUE"
	"-D" "BUILD_ZLIB:BOOL=FALSE"
	"-D" "BUILD_PNG:BOOL=FALSE"
	"-D" "WITH_FFMPEG:BOOL=FALSE"
	"-D" "WITH_IPP:BOOL=FALSE"
	"-D" "WITH_OPENMP:BOOL=TRUE"
	"-D" "WITH_PROTOBUF:BOOL=TRUE"
	"-D" "BUILD_opencv_apps:BOOL=FALSE"
	"-D" "BUILD_DOCS:BOOL=FALSE"
	"-D" "BUILD_PACKAGE:BOOL=FALSE"
	"-D" "INSTALL_CREATE_DISTRIB:BOOL=TRUE"
	"-D" "BUILD_JAVA:BOOL=FALSE"
	"-D" "BUILD_opencv_python2:BOOL=FALSE"
	"-D" "BUILD_opencv_python3:BOOL=FALSE"
	"-D" "ENABLE_LTO:BOOL=TRUE"
	"-D" "ENABLE_THIN_LTO:BOOL=TRUE"
	"-D" "CV_TRACE:BOOL=FALSE"
	"-D" "BUILD_PROTOBUF:BOOL=FALSE"
	"-D" "PROTOBUF_UPDATE_FILES:BOOL=TRUE"
)

get_prefixed_option(OPENCV_CONTRIB_MODULES OUTPUT_PREFIXES "__L")
foreach (__L_MODULE ${__L_OPENCV_CONTRIB_MODULES})
	include("options/${__L_MODULE}.cmake" NO_POLICY_SCOPE)
endforeach ()

get_ext_version(opencv __L_VERSION)

add_ext_dep(OpenCV "${__G_GITHUB_PREFIX}" "opencv/opencv" "${__L_VERSION}" "${__L_VERSION}" "" "CONFIG" ${__L_OPTIONS})

get_prefixed_option(OPENCV_CONTRIB_MODULES OUTPUT_PREFIXES "__L")
foreach (__L_MODULE ${__L_OPENCV_CONTRIB_MODULES})
	include("linkage/${__L_MODULE}.cmake" NO_POLICY_SCOPE)
endforeach ()
