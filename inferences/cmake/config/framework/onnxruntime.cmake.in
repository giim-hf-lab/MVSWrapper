if (onnxruntime_PREFIX)
	list(APPEND CMAKE_PREFIX_PATH ${onnxruntime_PREFIX})
endif ()
pkg_check_modules(onnxruntime REQUIRED libonnxruntime)

add_library(onnxruntime SHARED IMPORTED)
target_include_directories(onnxruntime INTERFACE ${onnxruntime_PREFIX}/include)
set_target_properties(onnxruntime PROPERTIES
	IMPORTED_LINK_INTERFACE_LANGUAGES CXX
	IMPORTED_LOCATION ${onnxruntime_LIBDIR}/libonnxruntime.so
)
target_link_directories(onnxruntime INTERFACE ${onnxruntime_LIBDIR})
target_link_libraries(onnxruntime INTERFACE ${onnxruntime_LINK_LIBRARIES})

if (IS_DIRECTORY ${CLIPPER_INSTALL_DIR})
	add_library(clipper STATIC IMPORTED)
	target_include_directories(clipper INTERFACE ${CLIPPER_INSTALL_DIR}/include)
	set_target_properties(clipper PROPERTIES
		IMPORTED_LINK_INTERFACE_LANGUAGES CXX
		IMPORTED_LOCATION ${CLIPPER_INSTALL_DIR}/lib/libClipper2.a
	)
	target_link_directories(clipper INTERFACE ${CLIPPER_INSTALL_DIR}/lib)
	target_link_libraries(clipper INTERFACE ${CLIPPER_INSTALL_DIR}/lib/libClipper2.a)
else ()
	message(FATAL_ERROR "CLIPPER_INSTALL_DIR is not valid: ${CLIPPER_INSTALL_DIR}.")
endif ()

target_link_libraries(@CMAKE_PROJECT_NAME@::framework::onnxruntime INTERFACE
	opencv_core
	opencv_imgproc

	clipper
	onnxruntime
)
